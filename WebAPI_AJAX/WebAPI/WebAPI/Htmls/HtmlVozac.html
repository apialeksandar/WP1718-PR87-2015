<!DOCTYPE html>
<html>
	<head>
		<title>Taksi sluzba</title>
		<meta charset="utf-8" />
		<style>
			/* Set height of body and the document to 100% to enable "full page tabs" */
			body, html {
				height: 100%;
				margin: 0;
				font-family: Arial;
			}

			/* Style tab links */
			.tablink {
				background-color: #555;
				color: white;
				float: left;
				border: none;
				outline: none;
				cursor: pointer;
				padding: 14px 16px;
				font-size: 17px;
				width: 25%;
			}

				.tablink:hover {
					background-color: #777;
				}

			/* Style the tab content (and add height:100% for full page content) */
			.tabcontent {
				color: black;
				display: none;
				padding: 100px 20px;
				height: 100%;
			}
		</style>
		<script src="Scripts/jquery-1.10.2.js"></script>
		<script src="Scripts/jquery.validate.js"></script>

		<script type="text/javascript">
		function openPage(pageName, elmnt, color) {
		// Hide all elements with class="tabcontent" by default */
		var i, tabcontent, tablinks;
		tabcontent = document.getElementsByClassName("tabcontent");
		for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
		}

		// Remove the background color of all tablinks/buttons
		tablinks = document.getElementsByClassName("tablink");
		for (i = 0; i < tablinks.length; i++) {
			tablinks[i].style.backgroundColor = "";
		}

		// Show the specific tab content
		document.getElementById(pageName).style.display = "block";

		// Add the specific color to the button used to open the tab content
		elmnt.style.backgroundColor = color;
		}

		function zavrsiVoznju()
		{
			$.ajax({
				url: 'api/trenutnaVoznja/post',
				method: 'POST',
				data: {
					Ulica: document.getElementById("ulicaaa").value,
					Broj: document.getElementById("brojjj").value,
					StatusVoznje: document.getElementById("statusVoznjeee").value,
				},
				success: function (data, status) {
					

					if (data == 'komentar')
					{
						loadKomentarVozac();
					}
					else if(data == 'unos')
					{
						loadUnosOdredista();
					}
				},
			});
		}
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
			 $("#Myprofile").click(function () {
				$.get("/api/vozac", function (data, status) {
					$("#korisnickoIme2").val(data.KorisnickoIme);
					$("#ime2").val(data.Ime);
					$("#prezime2").val(data.Prezime);
					if (data.Pol == 0) {
						$("#Muski").attr("selected", "true");
					}
					else {
						$("#Zenski").attr("selected", "true");
					}
					$("#kontaktTelefon2").val(data.KontaktTelefon);
					$("#lozinka2").val(data.Lozinka);
					$("#jmbg2").val(data.Jmbg);
					$("#email2").val(data.Email);
					$("#uloga2").val(data.Uloga);
					$("#voznje2").val(data.VoznjeKorisnika);
					$("#godisteAutomobila").val(data.Automobil.GodisteAutomobila);
					$("#brojRegistarskeOznake").val(data.Automobil.BrojRegistarskeOznake);
					$("#brojTaksiVozila").val(data.Automobil.BrojTaksiVozila);
					if (data.Automobil.TipAutomobila == 0) {
						$("#putnickiAutomobil").attr("selected", "true");
					}
					else if(data.Automobil.TipAutomobila == 1) {
						$("#kombiVozilo").attr("selected", "true");
					}
					$("#xKoordinata").val(data.Lokacija.XKoordinata);
					$("#yKoordinata").val(data.Lokacija.YKoordinata);
					$("#ulica").val(data.Lokacija.Adresa.Ulica);
					$("#broj").val(data.Lokacija.Adresa.Broj);
					$("#naseljenoMesto").val(data.Lokacija.Adresa.NaseljenoMesto);
					$("#pozivniBrojMesta").val(data.Lokacija.Adresa.PozivniBrojMesta);
				});
			 });

			 $("#trenutnaLokacija").click(function () {
			 	$.get("/api/vozac", function (data, status) {
			 		$("#korisnickoIme2").val(data.KorisnickoIme);
			 		$("#ime2").val(data.Ime);
			 		$("#prezime2").val(data.Prezime);
			 		if (data.Pol == 0) {
			 			$("#Muski").attr("selected", "true");
			 		}
			 		else {
			 			$("#Zenski").attr("selected", "true");
			 		}
			 		$("#kontaktTelefon2").val(data.KontaktTelefon);
			 		$("#lozinka2").val(data.Lozinka);
			 		$("#jmbg2").val(data.Jmbg);
			 		$("#email2").val(data.Email);
			 		$("#uloga2").val(data.Uloga);
			 		$("#voznje2").val(data.VoznjeKorisnika);
			 		$("#godisteAutomobila").val(data.Automobil.GodisteAutomobila);
			 		$("#brojRegistarskeOznake").val(data.Automobil.BrojRegistarskeOznake);
			 		$("#brojTaksiVozila").val(data.Automobil.BrojTaksiVozila);
			 		if (data.Automobil.TipAutomobila == 0) {
			 			$("#putnickiAutomobil").attr("selected", "true");
			 		}
			 		else if (data.Automobil.TipAutomobila == 1) {
			 			$("#kombiVozilo").attr("selected", "true");
			 		}
			 		$("#xKoordinata").val(data.Lokacija.XKoordinata);
			 		$("#yKoordinata").val(data.Lokacija.YKoordinata);
			 		$("#ulica").val(data.Lokacija.Adresa.Ulica);
			 		$("#broj").val(data.Lokacija.Adresa.Broj);
			 		$("#naseljenoMesto").val(data.Lokacija.Adresa.NaseljenoMesto);
			 		$("#pozivniBrojMesta").val(data.Lokacija.Adresa.PozivniBrojMesta);
			 	});
			 });

			 $("#trenutnaVoznja").click(function () {
			 	$.get("/api/trenutnaVoznja", function (data, status) {
			 		$("#ulicaaa").val(data.LokacijaNaKojuTaksiDolazi.Adresa.Ulica);
			 		$("#brojjj").val(data.LokacijaNaKojuTaksiDolazi.Adresa.Broj);
			 		
			 	});
			 });

			 $("#mojeVoznje").click(function () {
			 	$("#voznje").empty();
			 	var s1 = $("<th></th>").text("Ulica(pocetak)");
			 	var s2 = $("<th></th>").text("Broj(pocetak)");
			 	var s3 = $("<th></th>").text("Grad(pocetak)");
			 	var s4 = $("<th></th>").text("Dispecer");
			 	var s5 = $("<th></th>").text("Iznos");
			 	var s6 = $("<th></th>").text("Status voznje");
			 	var s7 = $("<th></th>").text("Vozac");
			 	/*var s8 = $("<th></th>").text("Ulica(odrediste)");
			 	var s9 = $("<th></th>").text("Broj(odrediste)");
			 	var s10 = $("<th></th>").text("Grad(odrediste)");*/
			 	$("#voznje").append("<tr>", s1, s2, s3, s4, s5, s6, s7, "</tr>");

			 	$.get("/api/sveVoznjeVozaca", function (data, status) {
			 		var i;

			 		for (i = 0; i < data.length; i++) {
			 			var txt1 = $("<td></td>").text(data[i].LokacijaNaKojuTaksiDolazi.Adresa.Ulica);
			 			var txt2 = $("<td></td>").text(data[i].LokacijaNaKojuTaksiDolazi.Adresa.Broj);
			 			var txt3 = $("<td></td>").text(data[i].LokacijaNaKojuTaksiDolazi.Adresa.NaseljenoMesto);
			 			var txt4 = $("<td></td>").text(data[i].Dispecer);
			 			var txt5 = $("<td></td>").text(data[i].Iznos);
			 			var txt6 = $("<td></td>").text(data[i].StatusVoznje);
			 			var txt7 = $("<td></td>").text(data[i].Vozac)
			 			/*var txt8 = $("<td></td>").text(data[i].Odrediste.Adresa.Ulica);
			 			var txt9 = $("<td></td>").text(data[i].Odrediste.Adresa.Broj);
			 			var txt10 = $("<td></td>").text(data[i].Odrediste.Adresa.NaseljenoMesto);*/
			 			$("#voznje").append("<tr>", txt1, txt2, txt3, txt4, txt5, txt6, txt7, "</tr>");
			 		}
			 	});
			 });

			 $("#voznjeNaCekanju").click(function () {
			 	$("#voznjeCekanje").empty();
			 	var s1 = $("<th></th>").text("Ulica(pocetak)");
			 	var s2 = $("<th></th>").text("Broj(pocetak)");
			 	var s3 = $("<th></th>").text("Grad(pocetak)");
			 	var s4 = $("<th></th>").text("Dispecer");
			 	var s5 = $("<th></th>").text("Iznos");
			 	var s6 = $("<th></th>").text("Status voznje");
			 	var s7 = $("<th></th>").text("Vozac");
			 	/*var s8 = $("<th></th>").text("Ulica(odrediste)");
			 	var s9 = $("<th></th>").text("Broj(odrediste)");
			 	var s10 = $("<th></th>").text("Grad(odrediste)");*/
			 	$("#voznjeCekanje").append("<tr>", s1, s2, s3, s4, s5, s6, s7, "</tr>");

			 	$.get("/api/voznje", function (data, status) {
			 		var i;

			 		for (i = 0; i < data.length; i++) {
			 			var txt1 = $("<td></td>").text(data[i].LokacijaNaKojuTaksiDolazi.Adresa.Ulica);
			 			var txt2 = $("<td></td>").text(data[i].LokacijaNaKojuTaksiDolazi.Adresa.Broj);
			 			var txt3 = $("<td></td>").text(data[i].LokacijaNaKojuTaksiDolazi.Adresa.NaseljenoMesto);
			 			var txt4 = $("<td></td>").text(data[i].Dispecer);
			 			var txt5 = $("<td></td>").text(data[i].Iznos);
			 			var txt6 = $("<td></td>").text(data[i].StatusVoznje);
			 			var txt7 = $("<td></td>").text(data[i].Vozac)
			 			/*var txt8 = $("<td></td>").text(data[i].Odrediste.Adresa.Ulica);
			 			var txt9 = $("<td></td>").text(data[i].Odrediste.Adresa.Broj);
			 			var txt10 = $("<td></td>").text(data[i].Odrediste.Adresa.NaseljenoMesto);*/
			 			$("#voznjeCekanje").append("<tr>", txt1, txt2, txt3, txt4, txt5, txt6, txt7, "</tr>");
			 		}
			 	});
			 });
		});
		</script>
	</head>
	<body>
		<h1>VOZAC</h1>
	<!-- Tab links -->
	
		<button class="tablink" onclick="openPage('Pocetna', this)" id="mojeVoznje">Moje voznje</button>
		<button class="tablink" onclick="openPage('Voznje na cekanju', this)" id="voznjeNaCekanju">Voznje na cekanju</button>
		<button class="tablink" onclick="openPage('My Profile', this)" id="Myprofile">My Profile</button>
		<button class="tablink" onclick="openPage('Lokacija', this)" id="trenutnaLokacija">Lokacija</button>
		<button class="tablink" onclick="openPage('Trenutna voznja', this)" id="trenutnaVoznja">Trenutna voznja</button>

		<div id="Pocetna" class="tabcontent">
			<table id="voznje" border="1">
			</table>
		</div>

		<div id="Voznje na cekanju" class="tabcontent">
			<table id="voznjeCekanje" border="1"></table>
		</div>

		<div id="My Profile" class="tabcontent">
		  <h3>My Profile</h3>
			<p>
				<form method="post" id="editVoz">
					<table>
						<tr>
							<th colspan="2" align="center">Vaši podaci</th>
						</tr>
						<tr>
							<th>Korisnicko ime: </th>
							<td><input type="text" name="korisnickoIme" id="korisnickoIme2" readonly></td>
						</tr>
						<tr>
							<th>Lozinka: </th>
							<td><input type="text" name="lozinka" id="lozinka2"></td>
						</tr>
						<tr>
							<th>Ime: </th>
							<td><input type="text" name="ime" id="ime2"></td>
						</tr>
						<tr>
							<th>Prezime: </th>
							<td><input type="text" name="prezime" id="prezime2"></td>
						</tr>
						<tr>
							<th>Pol: </th>
							<td>
								<select id="pol2" name="pol">
									<option value="Muski" id="Muski">Muski</option>
									<option value="Zenski" id="Zenski">Zenski</option>
								</select>
							</td>
						</tr>
						<tr>
							<th>JMBG: </th>
							<td><input type="text" name="jmbg" id="jmbg2"></td>
						</tr>
						<tr>
							<th>Kontakt telefon: </th>
							<td><input type="text" name="kontaktTelefon" id="kontaktTelefon2"></td>
						</tr>
						<tr>
							<th>E-mail: </th>
							<td><input type="text" name="email" id="email2"></td>
						</tr>
						<tr>
							<td>
								<input type="hidden" id="uloga" name="uloga" value="Vozac">
							</td>
						</tr>
						<tr>
							<th>Godiste vozila: </th>
							<td><input type="text" readonly id="godisteAutomobila" name="godisteAutomobila"></td>
						</tr>
						<tr>
							<th>Broj registarske oznake: </th>
							<td><input type="text" readonly id="brojRegistarskeOznake" name="brojRegistarskeOznake"></td>
						</tr>
						<tr>
							<th>Broj taksi vozila: </th>
							<td><input type="text" readonly id="brojTaksiVozila" name="brojTaksiVozila"></td>
						</tr>
						<tr>
							<th>Tip vozila: </th>
							<td>
								<select id="tipAutomobila" name="tipAutomobila">
									<option id="putnickiAutomobil">Putnicki Automobil</option>
									<option id="kombiVozilo">Kombi Vozilo</option>
								</select>
							</td>
						</tr>
						<tr>
							<td colspan="2" align="center"><input type="submit" value="Sačuvaj"></td>
						</tr>
					</table>
				</form>
				<script>
				validateVozac();
				</script>
			</p>
		</div>

		<div id="Lokacija" class="tabcontent">
			<p>
				<form action="post" id="editLokacija">
					<table>
						<tr>
							<th colspan="2" align="center">Vasa trenutna lokacija</th>
						</tr>
						<tr>
							<th>XKoordinata: </th>
							<td><input type="text" id="xKoordinata" name="xKoordinata" readonly></td>
						</tr>
						<tr>
							<th>YKoordinata: </th>
							<td><input type="text" id="yKoordinata" name="yKoordinata" readonly></td>
						</tr>
						<tr>
							<th>Ulica: </th>
							<td><input type="text" id="ulica" name="Adresa.ulica"></td>
						</tr>
						<tr>
							<th>Broj: </th>
							<td><input type="text" id="broj" name="Adresa.broj"></td>
						</tr>
						<tr>
							<th>Naseljeno mesto: </th>
							<td><input type="text" id="naseljenoMesto" name="Adresa.naseljenoMesto" readonly></td>
						</tr>
						<tr>
							<th>Pozivni broj mesta: </th>
							<td><input type="text" id="pozivniBrojMesta" name="Adresa.pozivniBrojMesta" readonly></td>
						</tr>
						<tr>
							<td><input type="submit" value="Promeni"></td>
						</tr>
				</table>
			</form>
				<script>validateEditLokacijaVozac();</script>
		</p>

			
		</div>

		<div id="Trenutna voznja" class="tabcontent">
			<table>
				<tr>
					<th>Ulica: </th>
					<td><input type="text" id="ulicaaa" name="ulicaaa" readonly></td>
				</tr>
				<tr>
					<th>Broj: </th>
					<td><input type="text" id="brojjj" name="brojjj" readonly></td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<select id="statusVoznjeee" name="statusVoznjeee">
							<option>Izaberi...</option>
							<option id="uspesna">Uspesna</option>
							<option id="neuspesna">Neuspesna</option>
						</select>
					</td>
				</tr>
				<tr>
					<td colspan="2" align="right"><input type="submit" value="Zavrsi voznju" onclick="zavrsiVoznju()"></td>
				</tr>
			</table>
		</div>
</body>
</html>
